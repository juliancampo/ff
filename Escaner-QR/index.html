<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escanear Código QR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="assets/plugins/qrCode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        body {
            background-image: url('213.jpg'); /* Cambia esta URL por la de tu imagen */
            background-size: cover; /* Para cubrir toda la pantalla */
            background-position: center; /* Centrar la imagen */
            background-repeat: no-repeat; /* No repetir la imagen */
            min-height: 100vh; /* Asegurarte de que cubra toda la altura */
        }
    </style>
</head>

<body>
    <div class="row justify-content-center mt-5">
        <div class="col-sm-4 shadow p-3">
            <h5 class="text-center">Escanear código QR</h5>
            <div class="row text-center">
                <a id="btn-scan-qr" href="#">
                    <img src="https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/07/1499401426qr_icon.svg" class="img-fluid text-center" width="175">
                </a>
                <canvas hidden="" id="qr-canvas" class="img-fluid"></canvas>
            </div>
            <div class="row mx-5 my-3">
                <button class="btn btn-success btn-sm rounded-3 mb-2" onclick="encenderCamara()">Encender cámara</button>
                <button class="btn btn-danger btn-sm rounded-3" onclick="cerrarCamara()">Detener cámara</button>
            </div>
        </div>
    </div>
    <audio id="audioScaner" src="assets/sonido.mp3"></audio>

    <!-- Blockchain Section -->
    <div id="blockchain"></div>

    <script src="blockchain.js"></script>
    <script src="assets/js/index.js"></script>

    <script>
        let codigosEscaneados = []; // Array para almacenar códigos escaneados

        function procesarCodigoQR(codigo) {
            if (codigosEscaneados.includes(codigo)) {
                Swal.fire({
                    icon: 'info',
                    title: 'Código ya escaneado',
                    text: 'Este código QR ya ha sido aceptado anteriormente.',
                });
            } else {
                // Aquí puedes agregar la lógica para aceptar el código, por ejemplo, verificar su validez
                const esValido = true; // Cambia esto según tu lógica de validación

                if (esValido) {
                    codigosEscaneados.push(codigo); // Agregar el código al array
                    Swal.fire({
                        icon: 'success',
                        title: 'Código aceptado',
                        text: 'El código QR ha sido aceptado.',
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Código no válido',
                        text: 'El código QR no es válido.',
                    });
                }
            }
        }

        // Simulación de escaneo de código QR (reemplaza esto con tu lógica de escaneo)
        document.getElementById('btn-scan-qr').addEventListener('click', function() {
            const codigoEscaneado = 'codigo-ejemplo'; // Reemplaza esto con el código QR escaneado real
            procesarCodigoQR(codigoEscaneado);
        });

        function encenderCamara() {
            // Lógica para encender la cámara
        }

        function cerrarCamara() {
            // Lógica para cerrar la cámara
        }
    </script>
</body>

</html>




